(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c11d4"],{4552:function(t,e,a){"use strict";a.r(e);a("7f7f");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white px-3",staticStyle:{margin:"-20px","margin-top":"-1rem","margin-bottom":"0!important"}},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"支付设置",name:"second"}},[e("el-table",{staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData}},[e("el-table-column",{attrs:{align:"left",label:"支付方式"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex align-items-center"},[e("img",{staticClass:"rounded mr-2",staticStyle:{width:"40px",height:"40px"},attrs:{src:a.row.src}}),e("div",{staticClass:"d-flex flex-column",staticStyle:{"align-items":"flex-start"}},[e("h6",[t._v(t._s(a.row.name))]),e("small",{staticClass:"d-block text-secondary"},[t._v(t._s(a.row.desc))])])])]}}])}),e("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.open(a.row.key)}}},[t._v("配置")])]}}])})],1)],1),e("el-tab-pane",{attrs:{label:"购物设置",name:"third"}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"160px"}},[e("el-form-item",{attrs:{label:"未支付订单"}},[e("el-input",{staticStyle:{width:"25%"},attrs:{type:"number",size:"mini",placeholder:"未支付订单"},model:{value:t.form.close_order_minute,callback:function(e){t.$set(t.form,"close_order_minute",e)},expression:"form.close_order_minute"}},[e("template",{slot:"append"},[t._v("天后自动关闭")])],2),e("small",{staticClass:"text-secondary d-block"},[t._v("订单下单未付款，n天后自动关闭，设置0天不自动关闭")])],1),e("el-form-item",{attrs:{label:"已发货订单"}},[e("el-input",{staticStyle:{width:"25%"},attrs:{type:"number",size:"mini",placeholder:"已发货订单"},model:{value:t.form.auto_received_day,callback:function(e){t.$set(t.form,"auto_received_day",e)},expression:"form.auto_received_day"}},[e("template",{slot:"append"},[t._v("天后自动确认收货")])],2),e("small",{staticClass:"text-secondary d-block"},[t._v("如果在期间未确认收货，系统自动完成收货，设置0天不自动收货")])],1),e("el-form-item",{attrs:{label:"已完成订单"}},[e("el-input",{staticStyle:{width:"25%"},attrs:{type:"number",size:"mini",placeholder:"已完成订单"},model:{value:t.form.after_sale_day,callback:function(e){t.$set(t.form,"after_sale_day",e)},expression:"form.after_sale_day"}},[e("template",{slot:"append"},[t._v("天内允许申请售后")])],2),e("small",{staticClass:"text-secondary d-block"},[t._v("订单完成后 ，用户在n天内可以发起售后申请，设置0天不允许申请售后")])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submit}},[t._v("保存")])],1)],1)],1)],1),e("el-drawer",{attrs:{title:"配置",visible:t.drawer,direction:"rtl","before-close":t.handleClose,size:"40%"},on:{"update:visible":function(e){t.drawer=e}}},[e("div",{staticStyle:{position:"absolute",top:"52px",left:"0",right:"0",bottom:"0"}},[e("div",{staticStyle:{position:"absolute",top:"0",left:"0",right:"0",bottom:"60px","overflow-y":"auto"}},["alipay"===t.drawerType?e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"app_id",prop:"app_id"}},[e("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"app_id",size:"mini"},model:{value:t.form.alipay.app_id,callback:function(e){t.$set(t.form.alipay,"app_id",e)},expression:"form.alipay.app_id"}})],1),e("el-form-item",{attrs:{label:"公钥",prop:"ali_public_key"}},[e("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",rows:"4",placeholder:"公钥",size:"mini"},model:{value:t.form.alipay.ali_public_key,callback:function(e){t.$set(t.form.alipay,"ali_public_key",e)},expression:"form.alipay.ali_public_key"}})],1),e("el-form-item",{attrs:{label:"私钥"}},[e("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",rows:"4",placeholder:"公钥",size:"mini"},model:{value:t.form.alipay.private_key,callback:function(e){t.$set(t.form.alipay,"private_key",e)},expression:"form.alipay.private_key"}})],1)],1):t._e(),"wxpay"===t.drawerType?e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"公众号 APPID"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"公众号 APPID"},model:{value:t.form.wxpay.app_id,callback:function(e){t.$set(t.form.wxpay,"app_id",e)},expression:"form.wxpay.app_id"}})],1),e("el-form-item",{attrs:{label:"小程序 APPID"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"小程序 APPID"},model:{value:t.form.wxpay.miniapp_id,callback:function(e){t.$set(t.form.wxpay,"miniapp_id",e)},expression:"form.wxpay.miniapp_id"}})],1),e("el-form-item",{attrs:{label:"小程序 secret"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"小程序 secret"},model:{value:t.form.wxpay.secret,callback:function(e){t.$set(t.form.wxpay,"secret",e)},expression:"form.wxpay.secret"}})],1),e("el-form-item",{attrs:{label:"appid"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"appid"},model:{value:t.form.wxpay.appid,callback:function(e){t.$set(t.form.wxpay,"appid",e)},expression:"form.wxpay.appid"}})],1),e("el-form-item",{attrs:{label:"商户号"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"商户号"},model:{value:t.form.wxpay.mch_id,callback:function(e){t.$set(t.form.wxpay,"mch_id",e)},expression:"form.wxpay.mch_id"}})],1),e("el-form-item",{attrs:{label:"API 密钥"}},[e("el-input",{attrs:{size:"mini",placeholder:"API 密钥"},model:{value:t.form.wxpay.key,callback:function(e){t.$set(t.form.wxpay,"key",e)},expression:"form.wxpay.key"}})],1),e("el-form-item",{attrs:{label:"cert_client"}},[e("el-upload",{attrs:{action:"/admin/sysconfig/upload",limit:1,headers:{token:t.$store.state.user.token},accept:".pem","on-success":t.uploadClientSuccess}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e("div",{staticClass:"text-danger"},[t._v(t._s(t.form.wxpay.cert_client?t.form.wxpay.cert_client:"还未配置"))]),e("div",{staticClass:"text-muted small"},[t._v("例如：apiclient_cert.pem")])])],1)],1),e("el-form-item",{attrs:{label:"cert_key"}},[e("el-upload",{attrs:{action:"/admin/sysconfig/upload",limit:1,headers:{token:t.$store.state.user.token},accept:".pem","on-success":t.uploadKeySuccess}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e("div",{staticClass:"text-danger"},[t._v(t._s(t.form.wxpay.cert_key?t.form.wxpay.cert_key:"还未配置"))]),e("div",{staticClass:"text-muted small"},[t._v("apiclient_key.pem")])])],1)],1)],1):t._e()],1),e("div",{staticClass:"border d-flex align-items-center px-3 bg-white",staticStyle:{height:"60px",position:"absolute",bottom:"0",right:"0",left:"0"}},[e("el-button",{on:{click:function(e){t.drawer=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)])])],1)},l=[],s={inject:["layout"],data:function(){return{activeName:"second",tableData:[{name:"支付宝支付",key:"alipay",desc:"该系统支持即时到账接口",src:"http://wxcs.niuteam.cn/addons/NsAlipay/ico.png"},{name:"微信支付",key:"wxpay",desc:"该系统支持微信网页支付和扫码支付",src:"http://wxcs.niuteam.cn/addons/NsWeixinpay/ico.png"}],form:{close_order_minute:0,auto_received_day:0,after_sale_day:0,alipay:{app_id:"",ali_public_key:"",private_key:""},wxpay:{app_id:"",miniapp_id:"",secret:"",appid:"",mch_id:"",key:"",cert_client:"",cert_key:""}},drawer:!1,drawerType:"alipay"}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.layout.showLoading(),this.axios.get("/admin/sysconfig",{token:!0}).then((function(e){var a=e.data.data;t.form=a,t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},open:function(t){this.drawerType=t,this.drawer=!0},uploadClientSuccess:function(t,e,a){this.form.wxpay.cert_client=t.data},uploadKeySuccess:function(t,e,a){this.form.wxpay.cert_key=t.data},submit:function(){var t=this;this.drawer=!1,this.layout.showLoading(),this.axios.post("/admin/sysconfig",this.form,{token:!0}).then((function(e){t.$message({type:"success",message:"修改成功"}),t.getData(),t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))}}},o=s,r=a("2877"),n=Object(r["a"])(o,i,l,!1,null,null,null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0c11d4.f0927d88.js.map