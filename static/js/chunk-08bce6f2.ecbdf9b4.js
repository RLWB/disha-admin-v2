(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08bce6f2"],{2909:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){if(Array.isArray(t))return n(t)}function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function o(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return i(t)||a(t)||o(t)||l()}r.d(e,"a",(function(){return s}))},"2bb2":function(t,e,r){"use strict";r("6edd")},3442:function(t,e,r){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex align-items-center"},[t._t("left"),t.showSearch?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.superSearch,expression:"!superSearch"}],staticClass:"ml-auto"},[t._t("right",(function(){return[e("el-input",{staticClass:"mr-2",staticStyle:{width:"150px"},attrs:{placeholder:t.placeholder,size:"mini"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),e("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){return t.$emit("search",t.keyword)}}},[t._v("搜索")]),t.showSuperSearch?e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.superSearch=!0}}},[t._v("高级搜索")]):t._e()]}))],2):t._e()],2),e("el-card",{directives:[{name:"show",rawName:"v-show",value:t.superSearch,expression:"superSearch"}],staticClass:"box-card bg-light my-3"},[e("div",{staticClass:"clearfix",staticStyle:{margin:"-10px"},attrs:{slot:"header"},slot:"header"},[e("span",[t._v("高级搜索")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.closeSuperSearch}},[t._v("收起")])],1),t._t("form")],2)],1)},i=[],a={props:{placeholder:{type:String,default:""},showSearch:{type:Boolean,default:!0},showSuperSearch:{type:Boolean,default:!0}},data:function(){return{keyword:"",superSearch:!1}},methods:{closeSuperSearch:function(){this.superSearch=!1}}},o=a,l=r("2877"),s=Object(l["a"])(o,n,i,!1,null,null,null);e["a"]=s.exports},"456d":function(t,e,r){var n=r("4bf8"),i=r("0d58");r("5eda")("keys",(function(){return function(t){return i(n(t))}}))},"5eda":function(t,e,r){var n=r("5ca1"),i=r("8378"),a=r("79e5");t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],o={};o[t]=e(r),n(n.S+n.F*a((function(){r(1)})),"Object",o)}},"6edd":function(t,e,r){},"8e6e":function(t,e,r){var n=r("5ca1"),i=r("990b"),a=r("6821"),o=r("11e9"),l=r("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,r,n=a(t),s=o.f,u=i(n),c={},d=0;while(u.length>d)r=s(n,e=u[d++]),void 0!==r&&l(c,e,r);return c}})},"990b":function(t,e,r){var n=r("9093"),i=r("2621"),a=r("cb7c"),o=r("7726").Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(a(t)),r=i.f;return r?e.concat(r(t)):e}},ade3:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("53ca");function i(t,e){if("object"!==Object(n["a"])(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==Object(n["a"])(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t){var e=i(t,"string");return"symbol"===Object(n["a"])(e)?e:String(e)}function o(t,e,r){return e=a(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},e1a4:function(t,e,r){"use strict";r.r(e);r("7f7f");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white px-3",staticStyle:{margin:"-20px","margin-top":"-1rem","margin-bottom":"0!important"}},[e("button-search",{staticClass:"pt-3",attrs:{showSearch:!1},scopedSlots:t._u([{key:"left",fn:function(){return[e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.openModel(!1)}}},[t._v("添加类型")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteAll()}}},[t._v("批量删除")])]},proxy:!0}])}),e("el-table",{staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e("el-table-column",{attrs:{label:"类型名称",prop:"name"}}),e("el-table-column",{attrs:{align:"center",width:"380",label:"属性标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t._f("formatValue")(e.row.value_list))+"\n\t\t\t")]}}])}),e("el-table-column",{attrs:{align:"center",prop:"order",label:"排序"}}),e("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{type:r.row.status?"success":"danger",size:"mini",plain:""},on:{click:function(e){return t.changeStatus(r.row)}}},[t._v(t._s(r.row.status?"启用":"禁用")+"\n\t\t\t\t")])]}}])}),e("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button-group",[e("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.openModel(r)}}},[t._v("修改")]),e("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(e){return t.deleteItem(r.row)}}},[t._v("删除")])],1)]}}])})],1),e("div",{staticStyle:{height:"60px"}}),e("el-footer",{staticClass:"border-top d-flex align-items-center px-0 position-fixed bg-white",staticStyle:{bottom:"0",left:"200px",right:"0","z-index":"100"}},[e("div",{staticClass:"px-2",staticStyle:{flex:"1"}},[e("el-pagination",{attrs:{"current-page":t.page.current,"page-sizes":t.page.sizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),e("el-dialog",{attrs:{width:"80%",title:"添加类型",visible:t.createModel,top:"5vh"},on:{"update:visible":function(e){t.createModel=e}}},[e("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"类型名称",prop:"name"}},[e("el-input",{staticStyle:{width:"25%"},attrs:{placeholder:"类型名称",size:"mini"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"排序"}},[e("el-input-number",{attrs:{size:"mini",min:0},model:{value:t.form.order,callback:function(e){t.$set(t.form,"order",e)},expression:"form.order"}})],1),e("el-form-item",{attrs:{label:"状态"}},[e("el-radio-group",{attrs:{size:"mini"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[e("el-radio",{attrs:{label:1,v:"",border:""}},[t._v("启用")]),e("el-radio",{attrs:{label:0,border:""}},[t._v("禁用")])],1)],1),e("el-form-item",{attrs:{label:"关联规格"}},[e("div",{staticClass:"d-flex"},[t._l(t.form.sku_list,(function(r,n){return e("span",{key:n,staticClass:"sku-list-item px-3 py-2 border rounded mr-3",staticStyle:{"line-height":"initial"}},[e("font",[t._v(t._s(r.name))]),e("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.deleteFormSkuList(n)}}})],1)})),e("el-button",{attrs:{size:"mini"},on:{click:t.chooseSkus}},[e("i",{staticClass:"el-icon-plus"})])],2)]),e("el-form-item",{attrs:{label:"属性列表"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.value_list}},[e("el-table-column",{attrs:{prop:"order",label:"排序",width:"80"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-input",{attrs:{size:"mini",placeholder:"排序"},model:{value:r.row.order,callback:function(e){t.$set(r.row,"order",e)},expression:"scope.row.order"}})]}}])}),e("el-table-column",{attrs:{prop:"name",label:"属性名称",width:"130"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-input",{attrs:{size:"mini",placeholder:"属性名称"},model:{value:r.row.name,callback:function(e){t.$set(r.row,"name",e)},expression:"scope.row.name"}})]}}])}),e("el-table-column",{attrs:{prop:"type",label:"所属类型",width:"130"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-select",{attrs:{placeholder:"请选择所属类型",size:"mini"},model:{value:r.row.type,callback:function(e){t.$set(r.row,"type",e)},expression:"scope.row.type"}},[e("el-option",{attrs:{label:"输入框",value:"input"}}),e("el-option",{attrs:{label:"单选框",value:"radio"}}),e("el-option",{attrs:{label:"多选框",value:"checkbox"}})],1)]}}])}),e("el-table-column",{attrs:{prop:"status",label:"是否显示",width:"80"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:r.row.status,callback:function(e){t.$set(r.row,"status",e)},expression:"scope.row.status"}})]}}])}),e("el-table-column",{attrs:{label:"属性值"},scopedSlots:t._u([{key:"default",fn:function(r){return"input"!==r.row.type?[r.row.isedit?e("el-input",{attrs:{type:"textarea",size:"mini",placeholder:"一行为一个属性值，多个属性值用换行输入"},model:{value:r.row.default,callback:function(e){t.$set(r.row,"default",e)},expression:"scope.row.default"}}):e("span",[t._v(t._s(r.row.default))])]:void 0}}],null,!0)}),e("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(r){return["input"!==r.row.type?e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.editRow(r)}}},[t._v(t._s(r.row.isedit?"完成":"编辑属性值"))]):t._e(),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.delRow(r.$index)}}},[t._v("删除")])]}}])})],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:t.addValue}},[t._v("添加一个属性")])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.createModel=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},i=[],a=(r("8e6e"),r("456d"),r("20d6"),r("a481"),r("ac6a"),r("2909")),o=r("ade3"),l=r("3442"),s=r("6590");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={inject:["layout","app"],mixins:[s["a"]],components:{buttonSearch:l["a"]},data:function(){return{preUrl:"goods_type",tableData:[],currentPage:1,multipleSelection:[],createModel:!1,editIndex:-1,form:{name:"",order:50,status:1,sku_list:[]},value_list:[],rules:{name:[{required:!0,message:"类型名称不能为空",trigger:"blur"}]}}},computed:{skus_id:function(){return this.form.sku_list.map((function(t){return t.id}))}},filters:{formatValue:function(t){var e=t.map((function(t){return t.name}));return e.join(",")}},methods:{getListResult:function(t){console.log(t.list),this.tableData=t.list.map((function(t){return t.value_list=t.goods_type_values,t.sku_list=t.skus,t}))},openModel:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.form=c({},t.row),this.value_list=Object(a["a"])(t.row.value_list),this.editIndex=t.$index):(this.form={name:"",order:50,status:1,sku_list:[]},this.value_list=[],this.editIndex=-1),this.createModel=!0},submit:function(){var t=this;this.$refs.form.validate((function(e){var r=!0,n=[];if(t.value_list.forEach((function(t,e){var i=e+1;""==t.order&&(r=r&&!1,n.push("第"+i+"行：排序不能为空")),""==t.name&&(r=r&&!1,n.push("第"+i+"行：属性名称不能为空")),"input"!==t.type&&""==t.default&&(r=r&&!1,n.push("第"+i+"行：属性值不能为空"))})),!r){var i="";return n.forEach((function(t){i+="<li>".concat(t,"</li>")})),t.$notify({title:"属性列表提示",dangerouslyUseHTMLString:!0,type:"warning",duration:3e3,message:"<ul>".concat(i,"</ul>")})}if(e){var o=t.value_list.map((function(t){return t.default&&(t.default=t.default.replace(/\n/g,",")),t})),l=c(c({},t.form),{},{skus_id:t.skus_id,value_list:Object(a["a"])(o)}),s=0;-1!==t.editIndex&&(s=t.tableData[t.editIndex].id),t.addOrEdit(l,s),t.createModel=!1}}))},addValue:function(){this.value_list.push({order:50,name:"",type:"input",value:"",isedit:!1})},editRow:function(t){t.row.isedit=!t.row.isedit},delRow:function(t){this.value_list.splice(t,1)},chooseSkus:function(){var t=this;this.app.chooseSkus((function(e){var r=t.form.sku_list.findIndex((function(t){return t.id===e.id}));-1===r&&t.form.sku_list.push(e)}))},deleteFormSkuList:function(t){this.form.sku_list.splice(t,1)}}},f=d,p=(r("2bb2"),r("2877")),m=Object(p["a"])(f,n,i,!1,null,null,null);e["default"]=m.exports},f1ae:function(t,e,r){"use strict";var n=r("86cc"),i=r("4630");t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}}}]);
//# sourceMappingURL=chunk-08bce6f2.ecbdf9b4.js.map