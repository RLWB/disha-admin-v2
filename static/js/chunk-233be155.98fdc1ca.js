(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-233be155"],{6857:function(t,e,a){},"79ec":function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white px-3 goods_create",staticStyle:{margin:"-20px","margin-top":"-1rem","margin-bottom":"0!important"}},[e("router-link",{staticStyle:{position:"absolute",top:"12px",left:"200px"},attrs:{to:{name:"shop_goods_list"}}},[e("el-button",{attrs:{size:"mini"}},[t._v("回到商品列表")])],1),e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"商品规格"}},[e("el-radio-group",{attrs:{value:t.skus_type,size:"medium"},on:{input:function(e){return t.vModel("skus_type",e)}}},[e("el-radio-button",{attrs:{label:0}},[t._v("\n\t\t\t\t\t单一规格")]),e("el-radio-button",{attrs:{label:1}},[t._v("\n\t\t\t\t\t多规格")])],1)],1)],1),0===t.skus_type?[e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"市场价格"}},[e("el-input",{staticClass:"w-25",attrs:{type:"number"},model:{value:t.sku_value.oprice,callback:function(e){t.$set(t.sku_value,"oprice",e)},expression:"sku_value.oprice"}},[e("template",{slot:"append"},[t._v("元")])],2)],1),e("el-form-item",{attrs:{label:"销售价格"}},[e("el-input",{staticClass:"w-25",attrs:{type:"number"},model:{value:t.sku_value.pprice,callback:function(e){t.$set(t.sku_value,"pprice",e)},expression:"sku_value.pprice"}},[e("template",{slot:"append"},[t._v("元")])],2)],1),e("el-form-item",{attrs:{label:"成本价格"}},[e("el-input",{staticClass:"w-25",attrs:{type:"number"},model:{value:t.sku_value.cprice,callback:function(e){t.$set(t.sku_value,"cprice",e)},expression:"sku_value.cprice"}},[e("template",{slot:"append"},[t._v("元")])],2)],1),e("el-form-item",{attrs:{label:"商品重量"}},[e("el-input",{staticClass:"w-25",attrs:{type:"number"},model:{value:t.sku_value.weight,callback:function(e){t.$set(t.sku_value,"weight",e)},expression:"sku_value.weight"}},[e("template",{slot:"append"},[t._v("公斤")])],2)],1),e("el-form-item",{attrs:{label:"商品体积"}},[e("el-input",{staticClass:"w-25",attrs:{type:"number"},model:{value:t.sku_value.volume,callback:function(e){t.$set(t.sku_value,"volume",e)},expression:"sku_value.volume"}},[e("template",{slot:"append"},[t._v("立方米")])],2)],1)],1)]:[e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"添加规格"}},[t._l(t.sku_card,(function(a,s){return e("sku-card",{key:s,attrs:{item:a,index:s,total:t.skuCardTotal}})})),e("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addSkuCardEvent}},[t._v("添加规格")])],2)],1),e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"批量设置"}},[t.updateAllStatus?e("div",{staticClass:"d-flex align-items-center"},[e("el-input",{staticClass:"mr-2",staticStyle:{width:"150px"},attrs:{size:"small",type:"number",placeholder:t.UpdateAllPlaceholder},model:{value:t.UpdateAllValue,callback:function(e){t.UpdateAllValue=e},expression:"UpdateAllValue"}}),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.UpdateAllSubmit}},[t._v("设置")]),e("el-button",{attrs:{size:"mini"},on:{click:t.closeUpdateAllStatus}},[t._v("取消")])],1):t._l(t.updateList,(function(a,s){return e("el-button",{key:s,attrs:{type:"text"},on:{click:function(e){return t.openUpdateAllStatus(a)}}},[t._v(t._s(a.name))])}))],2),e("el-form-item",{attrs:{label:"规格设置"}},[e("sku-table",{ref:"table"})],1)],1)],e("el-button",{staticStyle:{position:"fixed",bottom:"50px",right:"50px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],2)},l=[],i=(a("8e6e"),a("456d"),a("ac6a"),a("ade3")),o=a("2f62"),u=a("aaff"),r=a("6cb4"),n=a("deb6");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={inject:["app","layout"],components:{singleAttrs:u["a"],skuCard:r["a"],skuTable:n["a"]},data:function(){return{id:0,sku_value:{oprice:0,pprice:0,cprice:0,weight:0,volume:0},updateList:[{name:"销售价",key:"pprice"},{name:"市场价",key:"oprice"},{name:"成本价",key:"cprice"},{name:"库存",key:"stock"},{name:"体积",key:"volume"},{name:"重量",key:"weight"}],updateAllStatus:!1,UpdateAllPlaceholder:"",UpdateAllValue:""}},computed:p(p({},Object(o["d"])({skus_type:function(t){return t.goods_create.skus_type},sku_card:function(t){return t.goods_create.sku_card}})),{},{skuCardTotal:function(){return this.sku_card.length}}),created:function(){var t=this;if(this.id=this.$route.params.id,!this.id)return this.$message({type:"error",message:"非法参数"}),this.$router.push({name:"shop_goods_list"});this.layout.showLoading();var e=["属性值","#FFFFFF","/favicon.ico"];this.axios.get("/admin/goods/read/"+this.id,{token:!0}).then((function(a){var s=a.data.data;t.vModel("sku_card",s.goodsSkusCard.map((function(t){return t.list=t.goodsSkusCardValue,t.list.map((function(a){return a.text=0===t.type?a.value:e[0],a.color=1===t.type?a.value:e[1],a.image=2===t.type?a.value:e[2],a})),t}))),t.vModel("skus_type",s.sku_type),t.sku_value=s.sku_value?s.sku_value:{oprice:0,pprice:0,cprice:0,weight:0,volume:0},t.$nextTick((function(){t.$refs.table&&(t.$refs.table.list=s.goodsSkus)})),t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))},methods:p(p({},Object(o["c"])(["vModelState","addSkuCard","vModelGoodsAttrs"])),{},{addSkuCardEvent:function(){var t=this;this.layout.showLoading(),this.axios.post("/admin/goods_skus_card",{goods_id:this.id,name:"规格名称",order:50,type:0},{token:!0}).then((function(e){var a=e.data.data;a.list=[],t.addSkuCard(a),t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))},vModel:function(t,e){this.vModelState({key:t,value:e})},openUpdateAllStatus:function(t){this.updateAllStatus=t.key,this.UpdateAllPlaceholder=t.name},closeUpdateAllStatus:function(){this.updateAllStatus=!1,this.UpdateAllValue=""},UpdateAllSubmit:function(){var t=this;this.$refs.table.list.forEach((function(e){e[t.updateAllStatus]=t.UpdateAllValue})),this.closeUpdateAllStatus()},submit:function(){var t=this,e=[];this.$refs.table&&(e=this.$refs.table.list.map((function(e){return e.goods_id=t.id,e}))),this.layout.showLoading(),this.axios.post("/admin/goods/updateskus/"+this.id,{sku_type:this.skus_type,sku_value:this.sku_value,goodsSkus:e},{token:!0}).then((function(e){t.$message({type:"success",message:"修改成功"}),t.$router.push({name:"shop_goods_list"}),t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))}})},m=d,f=(a("c9ac"),a("2877")),k=Object(f["a"])(m,s,l,!1,null,null,null);e["default"]=k.exports},c9ac:function(t,e,a){"use strict";a("6857")}}]);
//# sourceMappingURL=chunk-233be155.98fdc1ca.js.map