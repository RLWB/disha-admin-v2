{"version":3,"sources":["webpack:///./src/views/image/index.vue?835e","webpack:///./src/views/image/index.vue","webpack:///src/views/image/index.vue","webpack:///./src/views/image/index.vue?1ec3","webpack:///./src/views/image/index.vue?04e9"],"names":["render","_vm","this","_c","_self","staticStyle","staticClass","attrs","model","value","searchForm","order","callback","$$v","$set","expression","keyword","on","getImageList","_v","chooseList","length","unChoose","_e","$event","imageDel","all","openAlbumModel","uploadModel","_l","albums","item","index","key","albumIndex","albumChange","albumDel","imageList","class","ischeck","_s","checkOrder","url","choose","name","previewImage","imageEdit","albumPage","changeAlbumPage","Math","ceil","albumTotal","currentPage","pageSizes","pageSize","total","handleSizeChange","handleCurrentChange","albumModelTitle","albumModel","ref","albumForm","slot","confirmAlbumModel","__init","token","$store","state","user","image_class_id","uploadSuccess","previewModel","previewUrl","staticRenderFns","inject","components","albumItem","data","albumEditIndex","computed","id","getImageListUrl","other","concat","created","methods","_this","forEach","img","i","findIndex","splice","_this2","push","v","_loop","j","no","_this3","layout","showLoading","axios","get","then","res","result","list","map","totalCount","hideLoading","catch","err","_this4","obj","_this5","albumEdit","post","$message","message","type","_this6","_this7","$confirm","confirmButtonText","cancelButtonText","delete","_this8","$prompt","inputValue","inputValidator","val","_ref","_this9","ids","response","file","fileList","console","log","component"],"mappings":"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","file":"js/chunk-57288f4e.951e9d4d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=46ce99a2&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-container',{staticStyle:{\"position\":\"absolute\",\"top\":\"55px\",\"bottom\":\"0\",\"left\":\"0\",\"right\":\"0\"}},[_c('el-header',{staticClass:\"d-flex align-items-center border-bottom\"},[_c('div',{staticClass:\"d-flex mr-auto\"},[_c('el-select',{staticClass:\"mr-2\",staticStyle:{\"width\":\"150px\"},attrs:{\"placeholder\":\"请选择图片排序方式\",\"size\":\"mini\"},model:{value:(_vm.searchForm.order),callback:function ($$v) {_vm.$set(_vm.searchForm, \"order\", $$v)},expression:\"searchForm.order\"}},[_c('el-option',{attrs:{\"label\":\"降序\",\"value\":\"desc\"}}),_c('el-option',{attrs:{\"label\":\"升序\",\"value\":\"asc\"}})],1),_c('el-input',{staticClass:\"mr-2\",staticStyle:{\"width\":\"150px\"},attrs:{\"size\":\"mini\",\"placeholder\":\"输入图片名称\"},model:{value:(_vm.searchForm.keyword),callback:function ($$v) {_vm.$set(_vm.searchForm, \"keyword\", $$v)},expression:\"searchForm.keyword\"}}),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":_vm.getImageList}},[_vm._v(\"搜索\")])],1),(_vm.chooseList.length)?_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":_vm.unChoose}},[_vm._v(\"\\n\\t\\t  \\t\\t\\t\\t取消选中\")]):_vm._e(),(_vm.chooseList.length)?_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.imageDel({all:true})}}},[_vm._v(\"\\n\\t\\t\\t批量删除\")]):_vm._e(),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openAlbumModel(false)}}},[_vm._v(\"创建相册\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.uploadModel = true}}},[_vm._v(\"上传图片\")])],1),_c('el-container',[_c('el-aside',{staticClass:\"bg-white border-right\",staticStyle:{\"position\":\"absolute\",\"top\":\"60px\",\"left\":\"0\",\"bottom\":\"60px\"},attrs:{\"width\":\"200px\"}},[_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.albums),function(item,index){return _c('album-item',{key:index,attrs:{\"item\":item,\"index\":index,\"active\":_vm.albumIndex === index},on:{\"change\":_vm.albumChange,\"edit\":_vm.openAlbumModel,\"del\":_vm.albumDel}})}),1)]),_c('el-container',[_c('el-main',{staticStyle:{\"position\":\"absolute\",\"top\":\"60px\",\"left\":\"200px\",\"bottom\":\"60px\",\"right\":\"0\"}},[_c('el-row',{attrs:{\"gutter\":10}},_vm._l((_vm.imageList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":24,\"lg\":4,\"md\":6,\"sm\":8}},[_c('el-card',{staticClass:\"box-card mb-3 position-relative\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"body-style\":{'padding':'0'},\"shadow\":\"hover\"}},[_c('div',{staticClass:\"border\",class:{'border-danger':item.ischeck}},[(item.ischeck)?_c('span',{staticClass:\"badge badge-danger\",staticStyle:{\"position\":\"absolute\",\"right\":\"0\",\"top\":\"0\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(item.checkOrder))]):_vm._e(),_c('img',{staticClass:\"w-100\",staticStyle:{\"height\":\"100px\"},attrs:{\"src\":item.url},on:{\"click\":function($event){return _vm.choose(item)}}}),_c('div',{staticClass:\"w-100 text-white px-1\",staticStyle:{\"background\":\"rgba(0,0,0,0.5)\",\"margin-top\":\"-25px\",\"position\":\"absolute\"}},[_c('span',{staticClass:\"small\"},[_vm._v(_vm._s(item.name))])]),_c('div',{staticClass:\"p-2 text-center\"},[_c('el-button-group',[_c('el-button',{staticClass:\"p-2\",attrs:{\"icon\":\"el-icon-view\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.previewImage(item)}}}),_c('el-button',{staticClass:\"p-2\",attrs:{\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.imageEdit(item,index)}}}),_c('el-button',{staticClass:\"p-2\",attrs:{\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.imageDel({index,item})}}})],1)],1)])])],1)}),1)],1)],1)],1),_c('el-footer',{staticClass:\"border-top d-flex align-items-center px-0\"},[_c('div',{staticClass:\"h-100 d-flex align-items-center justify-content-center border-right\",staticStyle:{\"width\":\"200px\",\"flex-shrink\":\"0\"}},[_c('el-button-group',[_c('el-button',{attrs:{\"size\":\"mini\",\"disabled\":_vm.albumPage === 1},on:{\"click\":function($event){return _vm.changeAlbumPage('pre')}}},[_vm._v(\"上一页\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"disabled\":_vm.albumPage === Math.ceil(_vm.albumTotal / 10)},on:{\"click\":function($event){return _vm.changeAlbumPage('next')}}},[_vm._v(\"下一页\")])],1)],1),_c('div',{staticClass:\"px-2\",staticStyle:{\"flex\":\"1\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":_vm.pageSizes,\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])],1),_c('el-dialog',{attrs:{\"title\":_vm.albumModelTitle,\"visible\":_vm.albumModel},on:{\"update:visible\":function($event){_vm.albumModel=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.albumForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"相册名称\"}},[_c('el-input',{attrs:{\"size\":\"medium\",\"placeholder\":\"请输入相册名称\"},model:{value:(_vm.albumForm.name),callback:function ($$v) {_vm.$set(_vm.albumForm, \"name\", $$v)},expression:\"albumForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"相册排序\"}},[_c('el-input-number',{attrs:{\"min\":0,\"size\":\"medium\"},model:{value:(_vm.albumForm.order),callback:function ($$v) {_vm.$set(_vm.albumForm, \"order\", $$v)},expression:\"albumForm.order\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.albumModel = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmAlbumModel}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"上传图片\",\"visible\":_vm.uploadModel},on:{\"update:visible\":function($event){_vm.uploadModel=$event},\"close\":_vm.__init}},[_c('div',{staticClass:\"text-center\"},[_c('el-upload',{staticClass:\"upload-demo w-100\",attrs:{\"drag\":\"\",\"action\":\"/admin/image/upload\",\"multiple\":\"\",\"headers\":{ token:_vm.$store.state.user.token },\"data\":{ image_class_id:_vm.image_class_id },\"name\":\"img\",\"on-success\":_vm.uploadSuccess}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过500kb\")])])],1)]),_c('el-dialog',{attrs:{\"visible\":_vm.previewModel,\"width\":\"60vw\",\"top\":\"5vh\"},on:{\"update:visible\":function($event){_vm.previewModel=$event}}},[_c('div',{staticStyle:{\"margin\":\"-60px -20px -30px -20px\"}},[_c('img',{staticClass:\"w-100\",attrs:{\"src\":_vm.previewUrl}})])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t\r\n\t\t<el-container style=\"position: absolute;top: 55px;bottom: 0;left: 0;right: 0;\">\r\n\t\t  <el-header class=\"d-flex align-items-center border-bottom\">\r\n\t\t\t  <!-- 头部 -->\r\n\t\t\t  <div class=\"d-flex mr-auto\">\r\n\t\t\t\t  <el-select class=\"mr-2\" placeholder=\"请选择图片排序方式\" \r\n\t\t\t\t  size=\"mini\" v-model=\"searchForm.order\"\r\n\t\t\t\t  style=\"width: 150px;\">\r\n\t\t\t\t  \t<el-option label=\"降序\" value=\"desc\"></el-option>\r\n\t\t\t\t  \t<el-option label=\"升序\" value=\"asc\"></el-option>\r\n\t\t\t\t  </el-select>\r\n\t\t\t\t  <el-input class=\"mr-2\" size=\"mini\" \r\n\t\t\t\t  placeholder=\"输入图片名称\" v-model=\"searchForm.keyword\"\r\n\t\t\t\t  style=\"width: 150px;\"></el-input>\r\n\t\t\t\t  <el-button type=\"success\" size=\"mini\"\r\n\t\t\t\t  @click=\"getImageList\">搜索</el-button>\r\n\t\t\t  </div>\r\n\t\t\t  <el-button type=\"warning\" size=\"mini\"\r\n\t\t\t  @click=\"unChoose\" v-if=\"chooseList.length\">\r\n\t\t\t  \t\t\t\t取消选中</el-button>\r\n\t\t\t  <el-button type=\"danger\" size=\"mini\"\r\n\t\t\t  @click=\"imageDel({all:true})\" v-if=\"chooseList.length\">\r\n\t\t\t\t批量删除</el-button>\r\n\t\t\t  <el-button type=\"success\" size=\"mini\"\r\n\t\t\t  @click=\"openAlbumModel(false)\">创建相册</el-button>\r\n\t\t\t  <el-button type=\"warning\" size=\"mini\"\r\n\t\t\t  @click=\"uploadModel = true\">上传图片</el-button>\r\n\t\t  </el-header>\r\n\t\t  <el-container>\r\n\t\t\t<el-aside width=\"200px\" style=\"position: absolute;top: 60px;left: 0;bottom: 60px;\" class=\"bg-white border-right\">\r\n\t\t\t\t<!-- 侧边 | 相册列表-->\r\n\t\t\t\t<ul class=\"list-group list-group-flush\">\r\n\t\t\t\t\t<album-item v-for=\"(item,index) in albums\" :key=\"index\"\r\n\t\t\t\t\t:item=\"item\" :index=\"index\" \r\n\t\t\t\t\t:active=\"albumIndex === index\"\r\n\t\t\t\t\t@change=\"albumChange\"\r\n\t\t\t\t\t@edit=\"openAlbumModel\"\r\n\t\t\t\t\t@del=\"albumDel\"></album-item>\r\n\t\t\t\t</ul>\r\n\t\t\t\t\r\n\t\t\t</el-aside>\r\n\t\t\t<el-container>\r\n\t\t\t  <el-main style=\"position: absolute;top: 60px;left:200px;bottom: 60px;right: 0;\">\r\n\t\t\t\t  <!-- 主内容 -->\r\n\t\t\t\t  <el-row :gutter=\"10\">\r\n\t\t\t\t  \t<el-col :span=\"24\" :lg=\"4\" :md=\"6\" :sm=\"8\"\r\n\t\t\t\t\tv-for=\"(item,index) in imageList\" :key=\"index\">\r\n\t\t\t\t\t\t<el-card class=\"box-card mb-3 position-relative\" \r\n\t\t\t\t\t\tstyle=\"cursor: pointer;\"\r\n\t\t\t\t\t\t:body-style=\"{'padding':'0'}\" shadow=\"hover\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div class=\"border\" \r\n\t\t\t\t\t\t:class=\"{'border-danger':item.ischeck}\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<span class=\"badge badge-danger\"\r\n\t\t\t\t\t\t\tstyle=\"position: absolute;right: 0;top: 0;\"\r\n\t\t\t\t\t\t\tv-if=\"item.ischeck\">\r\n\t\t\t\t\t\t\t{{item.checkOrder}}</span>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<img :src=\"item.url\" class=\"w-100\" \r\n\t\t\t\t\t\t\tstyle=\"height: 100px;\" \r\n\t\t\t\t\t\t\t@click=\"choose(item)\"/>\r\n\t\t\t\t\t\t\t<div class=\"w-100 text-white px-1\" style=\"background: rgba(0,0,0,0.5);margin-top: -25px;position: absolute;\">\r\n\t\t\t\t\t\t\t\t<span class=\"small\">{{item.name}}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div class=\"p-2 text-center\">\r\n\t\t\t\t\t\t\t\t<el-button-group>\r\n\t\t\t\t\t\t\t\t  <el-button icon=\"el-icon-view\" size=\"mini\" class=\"p-2\" @click=\"previewImage(item)\"></el-button>\r\n\t\t\t\t\t\t\t\t  <el-button icon=\"el-icon-edit\" size=\"mini\" class=\"p-2\" @click=\"imageEdit(item,index)\"></el-button>\r\n\t\t\t\t\t\t\t\t  <el-button icon=\"el-icon-delete\" size=\"mini\" class=\"p-2\" @click=\"imageDel({index,item})\"></el-button>\r\n\t\t\t\t\t\t\t\t</el-button-group>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t  </el-row>\r\n\t\t\t\t \r\n\t\t\t  </el-main>\r\n\t\t\t</el-container>\r\n\t\t  </el-container>\r\n\t\t  <el-footer class=\"border-top d-flex align-items-center px-0\">\r\n\t\t\t  <!-- 底部 -->\r\n\t\t\t  <div style=\"width: 200px; flex-shrink: 0;\" class=\"h-100 d-flex align-items-center justify-content-center border-right\">\r\n\t\t\t\t  <el-button-group>\r\n\t\t\t\t\t  <el-button size=\"mini\" :disabled=\"albumPage === 1\" @click=\"changeAlbumPage('pre')\">上一页</el-button>\r\n\t\t\t\t\t  <el-button size=\"mini\" @click=\"changeAlbumPage('next')\" :disabled=\"albumPage === Math.ceil(albumTotal / 10)\">下一页</el-button>\r\n\t\t\t\t  </el-button-group> \r\n\t\t\t  </div> \r\n\t\t\t  <div style=\"flex: 1;\" class=\"px-2\">\r\n\t\t\t\t  <el-pagination\r\n\t\t\t\t  @size-change=\"handleSizeChange\"\r\n\t\t\t\t  @current-change=\"handleCurrentChange\"\r\n\t\t\t\t  :current-page=\"currentPage\"\r\n\t\t\t\t  :page-sizes=\"pageSizes\"\r\n\t\t\t\t  :page-size=\"pageSize\"\r\n\t\t\t\t  layout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t  :total=\"total\">\r\n\t\t\t\t</el-pagination>\r\n\t\t\t  </div>\r\n\t\t  </el-footer>\r\n\t\t</el-container>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 修改|创建相册 -->\r\n\t\t<el-dialog :title=\"albumModelTitle\" :visible.sync=\"albumModel\">\r\n\t\t\t<el-form ref=\"form\" :model=\"albumForm\" label-width=\"80px\">\r\n\t\t\t\t<el-form-item label=\"相册名称\">\r\n\t\t\t\t\t<el-input v-model=\"albumForm.name\" size=\"medium\"\r\n\t\t\t\t\tplaceholder=\"请输入相册名称\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"相册排序\">\r\n\t\t\t\t\t<el-input-number v-model=\"albumForm.order\" \r\n\t\t\t\t\t:min=\"0\" size=\"medium\"\r\n\t\t\t\t\t></el-input-number>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"albumModel = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"confirmAlbumModel\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t\t\r\n\t\t<!-- 上传图片 -->\r\n\t\t<el-dialog title=\"上传图片\" :visible.sync=\"uploadModel\" @close=\"__init\">\r\n\t\t\t\r\n\t\t\t<div class=\"text-center\">\r\n\t\t\t\t<el-upload\r\n\t\t\t\t  class=\"upload-demo w-100\"\r\n\t\t\t\t  drag\r\n\t\t\t\t  action=\"/admin/image/upload\"\r\n\t\t\t\t  multiple\r\n\t\t\t\t  :headers=\"{ token:$store.state.user.token }\"\r\n\t\t\t\t  :data=\"{ image_class_id:image_class_id }\"\r\n\t\t\t\t  name=\"img\"\r\n\t\t\t\t  :on-success=\"uploadSuccess\">\r\n\t\t\t\t  <i class=\"el-icon-upload\"></i>\r\n\t\t\t\t  <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n\t\t\t\t  <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t\t\r\n\t\t<!-- 预览图片 -->\r\n\t\t<el-dialog :visible.sync=\"previewModel\" width=\"60vw\" top=\"5vh\">\r\n\t\t\t<div style=\"margin: -60px -20px -30px -20px;\">\r\n\t\t\t\t<img :src=\"previewUrl\" class=\"w-100\" />\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t\t\r\n\t</div>\n</template>\n\n<script>\r\n\timport albumItem from '@/components/image/album-item.vue';\r\n\texport default {\r\n\t\tinject:['layout'],\r\n\t\tcomponents: {\r\n\t\t\talbumItem\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuploadModel:false,\r\n\t\t\t\tsearchForm:{\r\n\t\t\t\t\torder:\"desc\",\r\n\t\t\t\t\tkeyword:\"\"\r\n\t\t\t\t},\r\n\t\t\t\talbumIndex:0,\r\n\t\t\t\talbumModel:false,\r\n\t\t\t\talbumEditIndex:-1,\r\n\t\t\t\talbumForm:{\r\n\t\t\t\t\tname:\"\",\r\n\t\t\t\t\torder:0\r\n\t\t\t\t},\r\n\t\t\t\talbums:[],\r\n\t\t\t\talbumPage:1,\r\n\t\t\t\talbumTotal:0,\r\n\t\t\t\t\r\n\t\t\t\tpreviewModel:false,\r\n\t\t\t\tpreviewUrl:\"\",\r\n\t\t\t\timageList:[],\r\n\t\t\t\t// 选中的数组\r\n\t\t\t\tchooseList:[],\r\n\t\t\t\tcurrentPage:1,\r\n\t\t\t\tpageSize:10,\r\n\t\t\t\tpageSizes:[10,20,50,100],\r\n\t\t\t\ttotal:10\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\talbumModelTitle() {\r\n\t\t\t\treturn this.albumEditIndex > -1 ? '修改相册' : '创建相册' \r\n\t\t\t},\r\n\t\t\t// 选中相册id\r\n\t\t\timage_class_id(){\r\n\t\t\t\tlet item = this.albums[this.albumIndex]\r\n\t\t\t\tif(item){\r\n\t\t\t\t\treturn item.id\r\n\t\t\t\t}\r\n\t\t\t\treturn 0\r\n\t\t\t},\r\n\t\t\t// 当前选中相册的图片列表URL\r\n\t\t\tgetImageListUrl(){\r\n\t\t\t\tlet other = ''\r\n\t\t\t\tif(this.searchForm.keyword != ''){\r\n\t\t\t\t\tother = `&keyword=${this.searchForm.keyword}`\r\n\t\t\t\t}\r\n\t\t\t\treturn `/admin/imageclass/${this.image_class_id}/image/${this.currentPage}?limit=${this.pageSize}&order=${this.searchForm.order}${other}`\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.__init()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 取消选中\r\n\t\t\tunChoose(){\r\n\t\t\t\tthis.imageList.forEach(img=>{\r\n\t\t\t\t\t// 找到所有选中的图片\r\n\t\t\t\t\tlet i = this.chooseList.findIndex(item=>{\r\n\t\t\t\t\t\treturn item.id === img.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (i > -1) {\r\n\t\t\t\t\t\t// 取消选中样式，选中排序归零\r\n\t\t\t\t\t\timg.ischeck = false\r\n\t\t\t\t\t\timg.checkOrder = 0\r\n\t\t\t\t\t\t// 从chooseList中移除\r\n\t\t\t\t\t\tthis.chooseList.splice(i,1)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 选中图片\r\n\t\t\tchoose(item){\r\n\t\t\t\t// 选中\r\n\t\t\t\tif (!item.ischeck) {\r\n\t\t\t\t\t// 加入选中\r\n\t\t\t\t\tthis.chooseList.push({ id:item.id,url:item.url})\r\n\t\t\t\t\t// 计算序号\r\n\t\t\t\t\titem.checkOrder = this.chooseList.length\r\n\t\t\t\t\t// 修改状态\r\n\t\t\t\t\titem.ischeck = true\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 取消选中\r\n\t\t\t\t// 找到在chooseList中的索引，\r\n\t\t\t\tlet i = this.chooseList.findIndex(v=>v.id === item.id)\r\n\t\t\t\tif(i===-1) return;\r\n\t\t\t\t// 重新计算序号\r\n\t\t\t\tlet length = this.chooseList.length\r\n\t\t\t\t// 取消选中中间部分\r\n\t\t\t\tif (i+1 < length) {\r\n\t\t\t\t\t// 重新计算imageList选中序号\r\n\t\t\t\t\tfor (let j = i; j < length; j++) {\r\n\t\t\t\t\t\tlet no = this.imageList.findIndex(v=>v.id === this.chooseList[j].id)\r\n\t\t\t\t\t\tif (no > -1) {\r\n\t\t\t\t\t\t\tthis.imageList[no].checkOrder--\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 删除\r\n\t\t\t\tthis.chooseList.splice(i,1)\r\n\t\t\t\t// 修改状态\r\n\t\t\t\titem.ischeck = false\r\n\t\t\t\t// 重置序号\r\n\t\t\t\titem.checkOrder = 0\r\n\t\t\t},\r\n\t\t\t// 获取对应相册下的图片列表\r\n\t\t\tgetImageList(){\r\n\t\t\t\tthis.layout.showLoading()\r\n\t\t\t\tthis.axios.get(this.getImageListUrl,{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tlet result = res.data.data\r\n\t\t\t\t\tthis.imageList = result.list.map(item=>{\r\n\t\t\t\t\t\treturn { \r\n\t\t\t\t\t\t\tid:item.id,\r\n\t\t\t\t\t\t\turl:item.url,\r\n\t\t\t\t\t\t\tname:item.name,\r\n\t\t\t\t\t\t\tischeck:false,\r\n\t\t\t\t\t\t\tcheckOrder:0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.total = result.totalCount\r\n\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t__init() {\r\n\t\t\t\t// 获取相册列表\r\n\t\t\t\tthis.layout.showLoading()\r\n\t\t\t\tthis.axios.get('/admin/imageclass/'+this.albumPage,{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tlet result = res.data.data\r\n\t\t\t\t\tthis.albums = result.list\r\n\t\t\t\t\tthis.albumTotal = result.totalCount\r\n\t\t\t\t\t// 获取选中相册下的第一页图片列表\r\n\t\t\t\t\tthis.getImageList()\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// for (var i = 0; i < 20; i++) {\r\n\t\t\t\t// \tthis.albums.push({\r\n\t\t\t\t// \t\tname:\"相册\"+i,\r\n\t\t\t\t// \t\tnum:Math.floor(Math.random()*100),\r\n\t\t\t\t// \t\torder:0\r\n\t\t\t\t// \t})\r\n\t\t\t\t// }\r\n\t\t\t\t\r\n\t\t\t\t// for (var i = 0; i < 30; i++) {\r\n\t\t\t\t// \tthis.imageList.push({ \r\n\t\t\t\t// \t\tid:i,\r\n\t\t\t\t// \t\turl:\"https://tangzhe123-com.oss-cn-shenzhen.aliyuncs.com/Appstatic/qsbk/demo/datapic/40.jpg\",\r\n\t\t\t\t// \t\tname:\"图片\"+i,\r\n\t\t\t\t// \t\tischeck:false,\r\n\t\t\t\t// \t\tcheckOrder:0\r\n\t\t\t\t// \t})\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\t// 切换相册\r\n\t\t\talbumChange(index){\r\n\t\t\t\tthis.albumIndex = index\r\n\t\t\t\tthis.getImageList()\r\n\t\t\t},\r\n\t\t\t// 打开相册修改/创建框\r\n\t\t\topenAlbumModel(obj){\r\n\t\t\t\t// 修改\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\tlet {item,index} = obj\r\n\t\t\t\t\t// 初始化表单\r\n\t\t\t\t\tthis.albumForm.name = item.name\r\n\t\t\t\t\tthis.albumForm.order = item.order\r\n\t\t\t\t\tthis.albumEditIndex = index\r\n\t\t\t\t\t// 打开模态框\r\n\t\t\t\t\treturn this.albumModel = true\r\n\t\t\t\t}\r\n\t\t\t\t// 创建\r\n\t\t\t\tthis.albumForm = {\r\n\t\t\t\t\tname:\"\",\r\n\t\t\t\t\torder:0\r\n\t\t\t\t}\r\n\t\t\t\tthis.albumEditIndex = -1\r\n\t\t\t\tthis.albumModel = true\r\n\t\t\t},\r\n\t\t\t// 点击确定修改/创建相册\r\n\t\t\tconfirmAlbumModel(){\r\n\t\t\t\t// 判断是否为修改\r\n\t\t\t\tif (this.albumEditIndex > -1) {\r\n\t\t\t\t\tthis.albumEdit()\r\n\t\t\t\t\treturn this.albumModel = false\r\n\t\t\t\t}\r\n\t\t\t\t// 创建相册\r\n\t\t\t\tthis.layout.showLoading()\r\n\t\t\t\tthis.axios.post('/admin/imageclass',this.albumForm,{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t// 隐藏表单\r\n\t\t\t\t\tthis.albumModel = false\r\n\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '创建成功',\r\n\t\t\t\t\t  type: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.__init()\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 修改相册\r\n\t\t\talbumEdit(){\r\n\t\t\t\tlet item = this.albums[this.albumEditIndex]\r\n\t\t\t\tthis.layout.showLoading()\r\n\t\t\t\tthis.axios.post('/admin/imageclass/'+item.id,this.albumForm,{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '修改成功',\r\n\t\t\t\t\t  type: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\tthis.__init()\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 删除相册\r\n\t\t\talbumDel(index){\r\n\t\t\t\tthis.$confirm('是否删除该相册', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlet id = this.albums[index].id\r\n\t\t\t\t\tthis.layout.showLoading()\r\n\t\t\t\t\tthis.axios.delete('/admin/imageclass/'+id,{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tmessage: '删除成功',\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.__init()\r\n\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 预览图片\r\n\t\t\tpreviewImage(item){\r\n\t\t\t\tthis.previewUrl = item.url\r\n\t\t\t\tthis.previewModel = true\r\n\t\t\t},\r\n\t\t\t// 修改图片名称\r\n\t\t\timageEdit(item,index){\r\n\t\t\t\tthis.$prompt('请输入新名称', '提示', {\r\n\t\t\t\t  confirmButtonText: '确定',\r\n\t\t\t\t  cancelButtonText: '取消',\r\n\t\t\t\t  inputValue:item.name,\r\n\t\t\t\t  inputValidator(val){\r\n\t\t\t\t\t  if (val === '') {\r\n\t\t\t\t\t  \treturn '图片名称不能为空'\r\n\t\t\t\t\t  }\r\n\t\t\t\t  }\r\n\t\t\t\t}).then(({ value }) => {\r\n\t\t\t\t\tthis.layout.showLoading()\r\n\t\t\t\t\tthis.axios.post('/admin/image/'+item.id,{\r\n\t\t\t\t\t\tname:value\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tthis.__init()\r\n\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tmessage: '修改成功',\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 删除当前图片\r\n\t\t\timageDel(obj){\r\n\t\t\t\tthis.$confirm(obj.all?'是否删除选中图片?':'是否删除该图片?',\r\n\t\t\t\t'提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.layout.showLoading()\r\n\t\t\t\t\tif (obj.all) {\r\n\t\t\t\t\t\t// 批量删除\r\n\t\t\t\t\t\tlet ids = this.chooseList.map(item=>item.id)\r\n\t\t\t\t\t\tthis.axios.post('/admin/image/delete_all',{\r\n\t\t\t\t\t\t\tids:ids\r\n\t\t\t\t\t\t},{\r\n\t\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tmessage: '删除成功',\r\n\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.__init()\r\n\t\t\t\t\t\t\tthis.chooseList = []\r\n\t\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// 删除单个\r\n\t\t\t\t\t\tthis.axios.delete('/admin/image/'+obj.item.id,{\r\n\t\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tmessage: '删除成功',\r\n\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.__init()\r\n\t\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tthis.layout.hideLoading()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleSizeChange(val) {\r\n\t\t\t\tthis.pageSize = val\r\n\t\t\t\tthis.getImageList()\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.currentPage = val\r\n\t\t\t\tthis.getImageList()\r\n\t\t\t},\r\n\t\t\t// 相册分页功能\r\n\t\t\tchangeAlbumPage(type){\r\n\t\t\t\tif(type === 'pre'){\r\n\t\t\t\t\tthis.albumPage--\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.albumPage++\r\n\t\t\t\t}\r\n\t\t\t\tthis.__init()\r\n\t\t\t},\r\n\t\t\t// 上传成功\r\n\t\t\tuploadSuccess(response, file, fileList){\r\n\t\t\t\tconsole.log(response, file, fileList);\r\n\t\t\t}\r\n\t\t},\r\n\t}\n</script>\n\n<style>\r\n.sum-active{\r\n\tcolor: #67C23A!important;\r\n    background-color: #f0f9eb!important;\r\n    border-color: #c2e7b0!important;\r\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=46ce99a2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=46ce99a2&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}