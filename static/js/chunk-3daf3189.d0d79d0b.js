(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3daf3189"],{"30bf":function(t,e,a){"use strict";a.r(e);a("7f7f");var n,s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white px-3",staticStyle:{margin:"-20px","margin-top":"-1rem","margin-bottom":"0!important"}},[e("el-tabs",{on:{"tab-click":t.getList},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabbars,(function(t,a){return e("el-tab-pane",{key:a,attrs:{label:t.name}})})),1),e("button-search",{ref:"buttonSearch",attrs:{placeholder:"要搜索的商品名称"},on:{search:t.searchEvent},scopedSlots:t._u([{key:"left",fn:function(){return[e("router-link",{staticClass:"mr-2",attrs:{to:{name:"shop_goods_create"}}},[e("el-button",{attrs:{type:"success",size:"mini"}},[t._v("发布商品")])],1),"delete"===t.tab?e("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(e){return t.doEvent("restore")}}},[t._v("恢复商品")]):t._e(),"delete"===t.tab?e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.doEvent("destroy")}}},[t._v("彻底删除")]):t._e(),"delete"!=t.tab?e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.deleteAll}},[t._v("批量删除")]):t._e(),"all"===t.tab||"off"===t.tab?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.changeStatus(1)}}},[t._v("上架")]):t._e(),"all"===t.tab||"saling"===t.tab?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.changeStatus(0)}}},[t._v("下架")]):t._e()]},proxy:!0},{key:"form",fn:function(){return[e("el-form",{ref:"form",attrs:{inline:"",model:t.form,"label-width":"80px"}},[e("el-form-item",{staticClass:"mb-0",attrs:{label:"商品名称"}},[e("el-input",{attrs:{placeholder:"商品名称",size:"mini"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("el-form-item",{staticClass:"mb-0",attrs:{label:"商品分类"}},[e("el-select",{attrs:{placeholder:"请选择商品分类",size:"mini"},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.cateOptions,(function(a){return e("el-option",{key:a.id,attrs:{label:t._f("tree")(a),value:a.id}})})),1)],1),e("el-form-item",{staticClass:"mb-0"},[e("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.searchEvent}},[t._v("\n\t\t\t\t\t\t搜索")]),e("el-button",{attrs:{size:"mini"},on:{click:t.clearSearch}},[t._v("清空筛选条件")])],1)],1)]},proxy:!0}])}),e("el-table",{staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e("el-table-column",{attrs:{label:"商品",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"media"},[e("img",{staticClass:"mr-3",staticStyle:{width:"60px",height:"60px"},attrs:{src:a.row.cover}}),e("div",{staticClass:"media-body"},[e("p",{staticClass:"mt-0"},[t._v(t._s(a.row.title))]),e("p",{staticClass:"mb-0"},[t._v("分类："+t._s(a.row.category.name))]),e("p",{staticClass:"mb-0"},[t._v("时间："+t._s(a.row.create_time))])])])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"sale_count",width:"70",label:"实际销量"}}),e("el-table-column",{attrs:{prop:"status",align:"center",label:"商品状态",width:"60"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"badge",class:a.row.status?"badge-success":"badge-danger"},[t._v(t._s(a.row.status?"上架":"仓库"))])]}}])}),e("el-table-column",{attrs:{prop:"status",align:"center",width:"120",label:"审核状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.ischeck?e("span",[t._v(t._s(1===a.row.ischeck?"通过":"拒绝"))]):e("div",{staticClass:"d-flex flex-column"},[e("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(e){return t.checkGoods(a.row,1)}}},[t._v("审核通过\n\t\t\t\t")]),e("el-button",{staticClass:"ml-0 mt-2",attrs:{type:"danger",size:"mini",plain:""},on:{click:function(e){return t.checkGoods(a.row,2)}}},[t._v("审核拒绝\n\t\t\t\t")])],1)]}}])}),e("el-table-column",{attrs:{prop:"stock",align:"center",width:"90",label:"总库存"}}),e("el-table-column",{attrs:{prop:"pprice",align:"center",label:" 价格(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"text-danger"},[t._v("￥"+t._s(a.row.min_price))]),e("span",[t._v("/")]),e("span",{staticClass:"text-muted"},[t._v("￥"+t._s(a.row.min_oprice))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.navigate("shop_goods_create",a.row.id)}}},[t._v("基础设置")]),e("el-button",{class:0==a.row.sku_type&&!a.row.sku_value||1==a.row.sku_type&&!a.row.goods_skus.length?"text-danger":"",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.navigate("shop_goods_sku",a.row.id)}}},[t._v("商品规格")]),e("el-button",{class:0==a.row.goods_attrs.length?"text-danger":"",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.navigate("shop_goods_attr",a.row.id)}}},[t._v("商品属性")]),e("el-button",{class:0==a.row.goods_banner.length?"text-danger":"",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.navigate("shop_goods_banner",a.row.id)}}},[t._v("媒体设置")]),e("el-button",{class:a.row.content?"":"text-danger",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.navigate("shop_goods_content",a.row.id)}}},[t._v("商品详情")]),e("el-button",{attrs:{type:"text",size:"mini"}},[t._v("折扣设置")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.deleteItem(a.row)}}},[t._v("删除商品")])]}}])})],1),e("div",{staticStyle:{height:"60px"}}),e("el-footer",{staticClass:"border-top d-flex align-items-center px-0 position-fixed bg-white",staticStyle:{bottom:"0",left:"200px",right:"0","z-index":"100"}},[e("div",{staticClass:"px-2",staticStyle:{flex:"1"}},[e("el-pagination",{attrs:{"current-page":t.page.current,"page-sizes":t.page.sizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)},i=[],r=a("ade3"),o=a("3442"),c=a("6590"),l={mixins:[c["a"]],inject:["layout"],components:{buttonSearch:o["a"]},data:function(){return{preUrl:"goods",tabIndex:0,tabbars:[{name:"全部",key:"all"},{name:"审核中",key:"checking"},{name:"出售中",key:"saling"},{name:"已下架",key:"off"},{name:"库存预警",key:"min_stock"},{name:"回收站",key:"delete"}],form:{title:"",category_id:""},tableData:[],cateOptions:[]}},filters:{tree:function(t){if(0==t.level)return t.name;for(var e="",a=0;a<t.level;a++)e+=0==a?"|--":"--";return e+" "+t.name}},computed:{tab:function(){return this.tabbars[this.tabIndex].key},params:function(){var t="";for(var e in this.form){var a=this.form[e];a&&(t+="&".concat(e,"=").concat(this.form[e]))}return t}},created:function(){},methods:(n={navigate:function(t,e){this.$router.push({name:t,params:{id:e}})},getListUrl:function(){return"/admin/".concat(this.preUrl,"/").concat(this.page.current,"?limit=").concat(this.page.size,"&tab=").concat(this.tab).concat(this.params)},getListResult:function(t){console.log(t),this.tableData=t.list,this.cateOptions=t.cates},changeStatus:function(t){t.status=1===t.status?0:1},clearSearch:function(){this.form={title:"",category_id:""}},searchEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"string"===typeof t&&(this.form.title=t),this.getList()},doEvent:function(t){var e=this;if(0===this.ids.length)return this.$message({type:"error",message:"请选择要操作的商品"});this.showLoading(),this.axios.post("/admin/goods/"+t,{ids:this.ids},{token:!0}).then((function(t){e.$message({type:"success",message:"操作成功"}),e.getList(),e.hideLoading()})).catch((function(t){e.hideLoading()}))}},Object(r["a"])(n,"changeStatus",(function(t){var e=this;if(0===this.ids.length)return this.$message({type:"error",message:"请选择要操作的商品"});this.showLoading(),this.axios.post("/admin/goods/changestatus",{ids:this.ids,status:t},{token:!0}).then((function(t){e.$message({type:"success",message:"操作成功"}),e.getList(),e.hideLoading()})).catch((function(t){e.hideLoading()}))})),Object(r["a"])(n,"checkGoods",(function(t,e){var a=this;this.layout.showLoading(),this.axios.post("/admin/goods/"+t.id+"/check",{ischeck:e},{token:!0}).then((function(t){a.getList(),a.$message({type:"success",message:"操作成功"}),a.layout.hideLoading()})).catch((function(t){a.layout.hideLoading()}))})),n)},u=l,d=a("2877"),p=Object(d["a"])(u,s,i,!1,null,null,null);e["default"]=p.exports},3442:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex align-items-center"},[t._t("left"),t.showSearch?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.superSearch,expression:"!superSearch"}],staticClass:"ml-auto"},[t._t("right",(function(){return[e("el-input",{staticClass:"mr-2",staticStyle:{width:"150px"},attrs:{placeholder:t.placeholder,size:"mini"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),e("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){return t.$emit("search",t.keyword)}}},[t._v("搜索")]),t.showSuperSearch?e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.superSearch=!0}}},[t._v("高级搜索")]):t._e()]}))],2):t._e()],2),e("el-card",{directives:[{name:"show",rawName:"v-show",value:t.superSearch,expression:"superSearch"}],staticClass:"box-card bg-light my-3"},[e("div",{staticClass:"clearfix",staticStyle:{margin:"-10px"},attrs:{slot:"header"},slot:"header"},[e("span",[t._v("高级搜索")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.closeSuperSearch}},[t._v("收起")])],1),t._t("form")],2)],1)},s=[],i={props:{placeholder:{type:String,default:""},showSearch:{type:Boolean,default:!0},showSuperSearch:{type:Boolean,default:!0}},data:function(){return{keyword:"",superSearch:!1}},methods:{closeSuperSearch:function(){this.superSearch=!1}}},r=i,o=a("2877"),c=Object(o["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},ade3:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("53ca");function s(t,e){if("object"!==Object(n["a"])(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,e||"default");if("object"!==Object(n["a"])(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function i(t){var e=s(t,"string");return"symbol"===Object(n["a"])(e)?e:String(e)}function r(t,e,a){return e=i(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}}}]);
//# sourceMappingURL=chunk-3daf3189.d0d79d0b.js.map