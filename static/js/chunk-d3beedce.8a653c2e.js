(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3beedce"],{2909:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t){if(Array.isArray(t))return i(t)}function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function s(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return o(t)||r(t)||s(t)||a()}n.d(e,"a",(function(){return c}))},3476:function(t,e,n){"use strict";n("d922")},b1c6:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white px-3 goods_create",staticStyle:{margin:"-20px","margin-top":"-1rem","margin-bottom":"0!important"}},[e("router-link",{staticStyle:{position:"absolute",top:"12px",left:"200px"},attrs:{to:{name:"shop_goods_list"}}},[e("el-button",{attrs:{size:"mini"}},[t._v("回到商品列表")])],1),e("div",{staticClass:"d-flex flex-wrap"},[t._l(t.banners,(function(n,i){return e("div",{key:i,staticClass:"border rounded d-flex align-items-center justify-content-center mr-3 mb-3",staticStyle:{width:"150px",height:"150px",cursor:"pointer",position:"relative"},on:{click:function(e){return t.chooseImage(i)}}},[n.url?e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:n.url}}):e("i",{staticClass:"el-icon-plus text-muted",staticStyle:{"font-size":"30px"}}),e("i",{staticClass:"el-icon-delete p-2 text-white",staticStyle:{position:"absolute",top:"0",right:"0","background-color":"rgba(0,0,0,0.4)"},on:{click:function(e){return e.stopPropagation(),t.deleteImage(i)}}})])})),t.banners.length<9?e("div",{staticClass:"border rounded d-flex align-items-center justify-content-center mr-3 mb-3",staticStyle:{width:"150px",height:"150px",cursor:"pointer"},on:{click:function(e){return t.chooseImage(-1)}}},[e("i",{staticClass:"el-icon-plus text-muted",staticStyle:{"font-size":"30px"}})]):t._e()],2),e("el-button",{staticStyle:{position:"fixed",bottom:"50px",right:"50px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)},o=[],r=n("2909"),s={inject:["app","layout"],data:function(){return{banners:[],id:0}},created:function(){var t=this;if(this.id=this.$route.params.id,!this.id)return this.$message({type:"error",message:"非法参数"}),this.$router.push({name:"shop_goods_list"});this.layout.showLoading(),this.axios.get("/admin/goods/read/"+this.id,{token:!0}).then((function(e){var n=e.data.data;t.banners=n.goodsBanner,t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))},methods:{chooseImage:function(t){var e=this,n=9,i=n-this.banners.length;this.app.chooseImage((function(n){var i=[];-1===t?i=[].concat(Object(r["a"])(e.banners),Object(r["a"])(n)):(i=Object(r["a"])(e.banners),i[t]=n[0]),e.banners=i}),-1===t?i:1)},deleteImage:function(t){var e=this;this.$confirm("是否要删除该图片?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){e.banners.splice(t,1)}))},submit:function(){var t=this;this.layout.showLoading(),this.axios.post("/admin/goods/banners/"+this.id,{banners:this.banners.map((function(t){return t.url}))},{token:!0}).then((function(e){t.$message({type:"success",message:"修改成功"}),t.$router.push({name:"shop_goods_list"}),t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))}}},a=s,c=(n("3476"),n("2877")),u=Object(c["a"])(a,i,o,!1,null,null,null);e["default"]=u.exports},d922:function(t,e,n){}}]);
//# sourceMappingURL=chunk-d3beedce.8a653c2e.js.map