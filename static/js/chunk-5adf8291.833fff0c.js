(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5adf8291"],{"0931":function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white px-3",staticStyle:{margin:"-20px","margin-top":"-1rem","margin-bottom":"0!important"}},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabbars,(function(t,a){return e("el-tab-pane",{key:a,attrs:{label:t.name}})})),1),e("button-search",{ref:"buttonSearch",attrs:{placeholder:"要搜索的订单编号"},on:{search:t.searchEvent},scopedSlots:t._u([{key:"left",fn:function(){return[e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.exportModal=!0}}},[t._v("导出数据")]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.deleteAll}},[t._v("批量删除")])]},proxy:!0},{key:"form",fn:function(){return[e("el-form",{ref:"form",attrs:{inline:"",model:t.form,"label-width":"80px"}},[e("el-form-item",{staticClass:"mb-0",attrs:{label:"订单编号"}},[e("el-input",{attrs:{placeholder:"订单编号",size:"mini"},model:{value:t.form.no,callback:function(e){t.$set(t.form,"no",e)},expression:"form.no"}})],1),e("el-form-item",{staticClass:"mb-0",attrs:{label:"下单时间"}},[e("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),e("el-form-item",{staticClass:"mb-0",attrs:{label:"收货人"}},[e("el-input",{attrs:{placeholder:"收货人",size:"mini"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{staticClass:"mb-0",attrs:{label:"手机号"}},[e("el-input",{attrs:{placeholder:"手机号",size:"mini"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),e("el-form-item",{staticClass:"mb-0"},[e("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.searchEvent}},[t._v("\n\t\t\t\t\t\t搜索")]),e("el-button",{attrs:{size:"mini"},on:{click:t.clearSearch}},[t._v("清空筛选条件")])],1)],1)]},proxy:!0}])}),e("el-table",{staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e("el-table-column",{attrs:{label:"商品",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("div",{staticStyle:{flex:"1"}},[e("p",{staticClass:"mb-1"},[t._v("订单编号：")]),e("p",{staticClass:"mb-1"},[e("small",[t._v(t._s(a.row.no))])])]),e("div",{staticStyle:{flex:"1"}},[e("p",{staticClass:"mb-1"},[t._v("下单时间：")]),e("p",{staticClass:"mb-1"},[e("small",[t._v(t._s(a.row.create_time))])])])]),t._l(a.row.order_items,(function(a,s){return e("div",{key:s,staticClass:"media border-top py-2"},[e("img",{staticClass:"mr-3",staticStyle:{width:"60px",height:"60px"},attrs:{src:a.goods_item.cover}}),e("div",{staticClass:"media-body"},[e("p",{staticClass:"mt-0"},[e("a",{staticClass:"text-primary"},[t._v(t._s(a.goods_item.title))])])])])}))]}}])}),e("el-table-column",{attrs:{align:"center",width:"120",label:"实付款"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v("￥"+t._s(a.row.total_price))]),e("p",[e("small",[t._v("(含运费：￥0.00)")])])]}}])}),e("el-table-column",{attrs:{align:"center",label:"买家",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.user.username))]),e("p",[e("small",[t._v("(用户id："+t._s(a.row.user.id)+")")])])]}}])}),e("el-table-column",{attrs:{prop:"status",align:"center",label:"支付方式"},scopedSlots:t._u([{key:"default",fn:function(a){return["wechat"===a.row.payment_method?e("span",{staticClass:"badge badge-success"},[t._v("微信支付")]):"alipay"===a.row.payment_method?e("span",{staticClass:"badge badge-primary"},[t._v("支付宝支付")]):e("span",{staticClass:"badge badge-secondary"},[t._v("未支付")])]}}])}),e("el-table-column",{attrs:{align:"center",label:"配送方式"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.ship_data?e("div",[e("div",[t._v(t._s(a.row.ship_data.express_company))]),e("div",[t._v(t._s(a.row.ship_data.express_no))])]):e("span",{staticClass:"badge badge-secondary"},[t._v("未配送")])]}}])}),e("el-table-column",{attrs:{align:"center",width:"170",label:"交易状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v("付款状态: \n\t\t\t\t"),e("span",{staticClass:"badge",class:a.row.payment_method?"badge-success":"badge-secondary"},[t._v(t._s(a.row.payment_method?"已付款":"未付款"))])]),e("div",[t._v("发货状态: \n\t\t\t\t"),e("span",{staticClass:"badge",class:a.row.ship_data?"badge-success":"badge-secondary"},[t._v(t._s(a.row.ship_data?"已发货":"未发货"))])]),e("div",[t._v("收货状态: \n\t\t\t\t"),e("span",{staticClass:"badge",class:"received"===a.row.ship_status?"badge-success":"badge-secondary"},[t._v(t._s("received"===a.row.ship_status?"已收货":"未收货"))])])]}}])}),e("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"mini"}},[t._v("订单详情")]),"pending"===a.row.ship_status&&0===a.row.closed&&a.row.payment_method&&"pending"===a.row.refund_status?e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.ship(a.row)}}},[t._v("订单发货")]):t._e()]}}])})],1),e("div",{staticStyle:{height:"60px"}}),e("el-footer",{staticClass:"border-top d-flex align-items-center px-0 position-fixed bg-white",staticStyle:{bottom:"0",left:"200px",right:"0","z-index":"100"}},[e("div",{staticClass:"px-2",staticStyle:{flex:"1"}},[e("el-pagination",{attrs:{"current-page":t.page.current,"page-sizes":t.page.sizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),e("el-dialog",{attrs:{title:"订单发货",visible:t.shipModal,width:"30%"},on:{"update:visible":function(e){t.shipModal=e}}},[e("el-form",{ref:"ruleForm",attrs:{model:t.shipForm}},[e("el-form-item",{attrs:{label:"快递公司",prop:"express_company"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.shipForm.express_company,callback:function(e){t.$set(t.shipForm,"express_company",e)},expression:"shipForm.express_company"}},t._l(t.express_company_options,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"快递单号",prop:"express_no"}},[e("el-input",{attrs:{type:"text"},model:{value:t.shipForm.express_no,callback:function(e){t.$set(t.shipForm,"express_no",e)},expression:"shipForm.express_no"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.shipModal=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.shipSubmit}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"导出数据",visible:t.exportModal,width:"40%"},on:{"update:visible":function(e){t.exportModal=e}}},[e("el-form",{ref:"ruleForm",attrs:{model:t.exportForm}},[e("el-form-item",{attrs:{label:"订单类型",prop:"tab"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.exportForm.tab,callback:function(e){t.$set(t.exportForm,"tab",e)},expression:"exportForm.tab"}},t._l(t.tabbars,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.key}})})),1)],1),e("el-form-item",{attrs:{label:"时间范围",prop:"time"}},[e("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.exportForm.time,callback:function(e){t.$set(t.exportForm,"time",e)},expression:"exportForm.time"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.exportModal=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("确 定")])],1)],1)],1)},o=[],r=a("3442"),i=a("6590"),n={mixins:[i["a"]],inject:["layout"],components:{buttonSearch:r["a"]},data:function(){return{preUrl:"order",tabIndex:0,tabbars:[{name:"全部",key:"all"},{name:"待付款",key:"nopay"},{name:"待发货",key:"noship"},{name:"已发货",key:"shiped"},{name:"已收货",key:"received"},{name:"已完成",key:"finish"},{name:"已关闭",key:"closed"},{name:"退款中",key:"refunding"}],form:{no:"",time:"",name:"",phone:""},tableData:[],shipModal:!1,shipForm:{express_company:"",express_no:""},shipId:0,express_company_options:[],exportModal:!1,exportForm:{tab:"",time:""}}},computed:{tab:function(){return this.tabbars[this.tabIndex].key},params:function(){var t="";for(var e in this.form){var a=this.form[e];a&&(Array.isArray(a)?(t+="&starttime=".concat(a[0]),t+="&endtime=".concat(a[1])):t+="&".concat(e,"=").concat(this.form[e]))}return t}},created:function(){var t=this;this.axios.get("/admin/express_company/1?limit=50",{token:!0}).then((function(e){var a=e.data.data;t.express_company_options=a.list}))},methods:{exportExcel:function(){var t=this;if(!this.exportForm.tab)return this.$message({type:"error",message:"订单类型不能为空"});var e="/admin/order/excelexport?tab=".concat(this.exportForm.tab),a="",s=this.exportForm.time;s&&Array.isArray(s)&&(a+="&starttime=".concat(s[0]),a+="&endtime=".concat(s[1])),this.layout.showLoading(),this.axios.post(e+a,{},{token:!0,responseType:"blob"}).then((function(e){if(t.exportModal=!1,200==e.status){var a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.style.display="none",s.href=a;var o=(new Date).getTime()+".xlsx";s.setAttribute("download",o),document.body.appendChild(s),s.click()}t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))},getListUrl:function(){return"/admin/".concat(this.preUrl,"/").concat(this.page.current,"?limit=").concat(this.page.size,"&tab=").concat(this.tab).concat(this.params)},getListResult:function(t){console.log(t),this.tableData=t.list},handleClick:function(t,e){this.getList()},clearSearch:function(){this.form={no:"",time:"",name:"",phone:""}},searchEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("string"===typeof t)return this.form.no=t,this.getList(),console.log("简单搜索",t);this.getList()},ship:function(t){this.shipId=t.id,this.shipModal=!0},shipSubmit:function(){var t=this;this.layout.showLoading(),this.axios.post("/admin/order/"+this.shipId+"/ship",this.shipForm,{token:!0}).then((function(e){t.shipModal=!1,t.$message({type:"success",message:"发货成功"}),t.getList(),t.layout.hideLoading()})).catch((function(e){t.layout.hideLoading()}))}}},l=n,c=a("2877"),p=Object(c["a"])(l,s,o,!1,null,null,null);e["default"]=p.exports},3442:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex align-items-center"},[t._t("left"),t.showSearch?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.superSearch,expression:"!superSearch"}],staticClass:"ml-auto"},[t._t("right",(function(){return[e("el-input",{staticClass:"mr-2",staticStyle:{width:"150px"},attrs:{placeholder:t.placeholder,size:"mini"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),e("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){return t.$emit("search",t.keyword)}}},[t._v("搜索")]),t.showSuperSearch?e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.superSearch=!0}}},[t._v("高级搜索")]):t._e()]}))],2):t._e()],2),e("el-card",{directives:[{name:"show",rawName:"v-show",value:t.superSearch,expression:"superSearch"}],staticClass:"box-card bg-light my-3"},[e("div",{staticClass:"clearfix",staticStyle:{margin:"-10px"},attrs:{slot:"header"},slot:"header"},[e("span",[t._v("高级搜索")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.closeSuperSearch}},[t._v("收起")])],1),t._t("form")],2)],1)},o=[],r={props:{placeholder:{type:String,default:""},showSearch:{type:Boolean,default:!0},showSuperSearch:{type:Boolean,default:!0}},data:function(){return{keyword:"",superSearch:!1}},methods:{closeSuperSearch:function(){this.superSearch=!1}}},i=r,n=a("2877"),l=Object(n["a"])(i,s,o,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-5adf8291.833fff0c.js.map